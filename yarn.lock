# 1. Usa imagem base Node 20
FROM node:20

# 2. Define diretório de trabalho
WORKDIR /usr/src/app

# 3. Copia apenas os arquivos essenciais primeiro (para aproveitar cache)
COPY package.json yarn.lock ./

# 4. Ativa Corepack (necessário para Yarn 4+)
RUN corepack enable

# 5. Instala dependências de produção usando Yarn 4 (com cache imutável)
RUN yarn install --immutable

# 6. Copia o restante do projeto
COPY . .

# 7. Expõe a porta (se o seu bot usa alguma, por exemplo 3000)
EXPOSE 3000

# 8. Comando padrão
CMD ["yarn", "start"]
